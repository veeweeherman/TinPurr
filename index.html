<!DOCTYPE html>
<html ng-app="app">
  <head>
    <meta charset='utf-8'> 
    <title>Cats: Cute or Not (^o^)</title>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="app.js"></script>
    <script src="controllers.js"></script>
  </head>
  
  <body>
    <script>
      var yqlCallback = function(data) {
        console.log('this is flickr cat data',data);
        var photo = data.query.results.photo[0]; //first cat: felix
        var farmId = data.query.results.photo[0].farm;
        var serverId = data.query.results.photo[0].server;
        var id1 = data.query.results.photo[0].id;
        var secret = data.query.results.photo[0].secret;
        console.log("https://farm"+farmId+".static.flickr.com/"+serverId+"/"+id1+"_"+secret+".jpg")
        alert(photo.title);
      };
    </script>
    <script src="https://query.yahooapis.com/v1/public/yql?q=select * from flickr.photos.search where has_geo='true' and tags='funny cats' and api_key='c4f57fcf22dcb4274f71bbacc7550f0c'&format=json&callback=yqlCallback"></script>
    
    <img src="https://farm1.static.flickr.com/303/19534647013_385563d7fb.jpg">

    <div ng-controller="CuteCtrl">
      <h1>Cats!! Cats!! Cats!! Cats!! Cats!!</h1>
      
      <div ng-repeat="src in images | limitTo:quantity" >
        <img ng-src="{{ src.src }}"  >
        <p>{{src.title}}: {{counts[$index] || 0}}</p>
        <button ng-click="upVote($index,src)">+1</button>
      </div>
      
      <p>Total: {{ total }}</p>
     
      <p>
        And the winner is {{ winner }} with {{ percent() }}% of the votes
      </p>
    
    </div>


    <div>
    </div>

  </body>
</html>